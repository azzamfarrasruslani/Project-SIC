import{q as w,r as d,j as a,f as b,b as N}from"./app-Dh9U4SK1.js";import{A as C}from"./AuthenticatedLayout-N0h_cTWz.js";import{s as x}from"./proxy-CwE9UnCx.js";import{F as j,a as F,b as k}from"./FormFile-CU41cVgl.js";import"./Icon-_VO6nH5L.js";function T(){var h;const{props:f}=w(),l=f.komik,[r,u]=d.useState({judul:l.judul||"",deskripsi:l.deskripsi||"",pengarang:l.pengarang||"",thumbnail:null,gambar:[]}),[o,g]=d.useState(!1),[i,p]=d.useState({}),m=s=>{const{name:e,value:t}=s.target;u(n=>({...n,[e]:t}))},c=(s,e)=>{const t=s.target.files;u(n=>({...n,[e]:e==="gambar"?[...t]:t[0]}))},y=async s=>{var t;s.preventDefault(),g(!0),p({});const e=new FormData;e.append("judul",r.judul),e.append("deskripsi",r.deskripsi),e.append("pengarang",r.pengarang),r.thumbnail&&e.append("thumbnail",r.thumbnail),r.gambar.forEach((n,v)=>{e.append(`gambar[${v}]`,n)});try{await N.post(`/admin/komik/${l.id_komik}/update`,e,{headers:{"Content-Type":"multipart/form-data"}}),b.visit(x("komik.admin"))}catch(n){((t=n.response)==null?void 0:t.status)===422?p(n.response.data.errors):console.error("Gagal menyimpan data",n)}finally{g(!1)}};return a.jsx(C,{children:a.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Edit Komik"}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border",children:a.jsxs("form",{onSubmit:y,className:"space-y-5",children:[a.jsx(j,{label:"Judul",name:"judul",value:r.judul,onChange:m,placeholder:"Masukkan Judul",error:i.judul}),a.jsx(F,{label:"Deskripsi",name:"deskripsi",value:r.deskripsi,onChange:m,placeholder:"Masukkan Deskripsi",error:i.deskripsi}),a.jsx(j,{label:"Pengarang",name:"pengarang",value:r.pengarang,onChange:m,placeholder:"Masukkan Nama Pengarang",error:i.pengarang}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx(k,{label:"Thumbnail Baru (Opsional)",name:"thumbnail",onChange:s=>c(s,"thumbnail"),error:i.thumbnail}),l.thumbnail&&a.jsxs("div",{className:"mt-3 p-2 border rounded-lg bg-gray-50 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Thumbnail Lama:"}),a.jsx("img",{src:`/storage/${l.thumbnail}`,alt:"Thumbnail lama",className:"w-32 h-32 object-cover rounded shadow"})]})]}),a.jsxs("div",{children:[a.jsx(k,{label:"Gambar Panel Baru (Opsional)",name:"gambar",onChange:s=>c(s,"gambar"),error:i["gambar.0"]||i.gambar,multiple:!0}),((h=l.gambar_komik)==null?void 0:h.length)>0&&a.jsxs("div",{className:"mt-3 p-2 border rounded-lg bg-gray-50 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Panel Gambar Lama:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.gambar_komik.map((s,e)=>a.jsx("img",{src:`/storage/${s.gambar}`,alt:`Panel ${e+1}`,className:"w-20 h-28 object-cover rounded shadow"},e))})]})]})]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{type:"submit",disabled:o,className:`px-8 py-3 rounded-lg font-semibold transition-all shadow-md ${o?"bg-lime-600 cursor-not-allowed":"bg-lime-800 hover:bg-lime-600 text-white"}`,children:o?"Menyimpan...":"Simpan Perubahan"}),a.jsx("button",{type:"button",onClick:()=>b.visit(x("komik.admin")),className:"px-8 py-3 rounded-lg font-semibold transition-all bg-gray-300 hover:bg-gray-400 shadow-md text-gray-700",children:"Batal"})]})]})})]})})}export{T as default};
