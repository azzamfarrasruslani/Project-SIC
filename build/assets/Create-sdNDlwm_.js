import{r as o,j as a,f as j,b as N}from"./app-Dh9U4SK1.js";import{A as C}from"./AuthenticatedLayout-N0h_cTWz.js";import{s as c}from"./proxy-CwE9UnCx.js";import{F as f,a as P,b as v}from"./FormFile-CU41cVgl.js";import"./Icon-_VO6nH5L.js";function G(){const[t,m]=o.useState({judul:"",deskripsi:"",thumbnail:null,gambar:[],pengarang:""}),[p,k]=o.useState(null),[b,w]=o.useState([]),[d,g]=o.useState(!1),[l,h]=o.useState({}),u=s=>{const{name:e,value:n}=s.target;m(r=>({...r,[e]:n}))},x=(s,e)=>{const n=s.target.files;if(e==="thumbnail")m(r=>({...r,thumbnail:n[0]})),k(URL.createObjectURL(n[0]));else if(e==="gambar"){const r=[...n];m(i=>({...i,gambar:r})),w(r.map(i=>URL.createObjectURL(i)))}},y=async s=>{var n;s.preventDefault(),g(!0),h({});const e=new FormData;e.append("judul",t.judul),e.append("deskripsi",t.deskripsi),e.append("pengarang",t.pengarang),e.append("thumbnail",t.thumbnail),t.gambar.forEach((r,i)=>{e.append(`gambar[${i}]`,r)});try{await N.post(c("komik.store"),e,{headers:{"Content-Type":"multipart/form-data"}}),j.visit(c("komik.admin"))}catch(r){((n=r.response)==null?void 0:n.status)===422?h(r.response.data.errors):console.error("Gagal menyimpan data",r)}finally{g(!1)}};return a.jsx(C,{children:a.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Tambah Komik"}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border",children:a.jsxs("form",{onSubmit:y,className:"space-y-5",children:[a.jsx(f,{label:"Judul",name:"judul",value:t.judul,onChange:u,placeholder:"Masukkan Judul",error:l.judul}),a.jsx(P,{label:"Deskripsi",name:"deskripsi",value:t.deskripsi,onChange:u,placeholder:"Masukkan Deskripsi",error:l.deskripsi}),a.jsx(v,{label:"Thumbnail",name:"thumbnail",onChange:s=>x(s,"thumbnail"),error:l.thumbnail}),p&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview Thumbnail:"}),a.jsx("img",{src:p,alt:"Preview Thumbnail",className:"w-32 h-32 object-cover rounded shadow"})]}),a.jsx(v,{label:"Gambar Panel (boleh lebih dari satu)",name:"gambar",onChange:s=>x(s,"gambar"),error:l["gambar.0"]||l.gambar,multiple:!0}),b.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preview Gambar Panel:"}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:b.map((s,e)=>a.jsx("img",{src:s,alt:`Panel ${e+1}`,className:"w-24 h-24 object-cover rounded shadow"},e))})]}),a.jsx(f,{label:"Pengarang",name:"pengarang",value:t.pengarang,onChange:u,placeholder:"Masukkan Nama Pengarang",error:l.pengarang}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{type:"submit",disabled:d,className:`px-8 py-3 rounded-lg font-semibold transition-all shadow-md ${d?"bg-lime-600 cursor-not-allowed":"bg-lime-800 hover:bg-lime-600 text-white"}`,children:d?"Menyimpan...":"Simpan Komik"}),a.jsx("button",{type:"button",onClick:()=>j.visit(c("komik.admin")),className:"px-8 py-3 rounded-lg font-semibold transition-all bg-gray-300 hover:bg-gray-400 shadow-md text-gray-700",children:"Batal"})]})]})})]})})}export{G as default};
