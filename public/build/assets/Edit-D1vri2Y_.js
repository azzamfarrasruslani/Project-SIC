import{q as f,r as p,j as a,f as j,b as y}from"./app-DXBGwqw_.js";import{A as v}from"./AuthenticatedLayout-DLTyTaLg.js";import{s as c}from"./proxy-BNdyZ0td.js";import{F as d,a as w,b as N}from"./FormFile-2IfauRA0.js";import"./Icon-CHMhgCiH.js";function D(){const{props:h}=f(),s=h.produk,[e,u]=p.useState({nama:s.nama||"",deskripsi:s.deskripsi||"",kategori:s.kategori||"",harga:s.harga||"",linkproduk:s.linkproduk||"",gambar:null}),[m,g]=p.useState(!1),[n,k]=p.useState({}),i=o=>{const{name:r,value:t}=o.target;u(l=>({...l,[r]:t}))},b=(o,r)=>{u(t=>({...t,[r]:o.target.files[0]}))},x=async o=>{var t;o.preventDefault(),g(!0),k({});const r=new FormData;r.append("nama",e.nama),r.append("deskripsi",e.deskripsi),r.append("kategori",e.kategori),r.append("harga",e.harga),r.append("linkproduk",e.linkproduk),e.gambar&&r.append("gambar",e.gambar);try{await y.post(`/admin/produk/${s.id_produk}/update`,r,{headers:{"Content-Type":"multipart/form-data"}}),window.location.href=c("produk.admin")}catch(l){((t=l.response)==null?void 0:t.status)===422?k(l.response.data.errors):console.error("Gagal menyimpan data",l)}finally{g(!1)}};return a.jsx(v,{children:a.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Edit Produk"}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border",children:a.jsxs("form",{onSubmit:x,className:"space-y-5",children:[a.jsx(d,{label:"Nama Produk",name:"nama",value:e.nama,onChange:i,placeholder:"Masukkan Nama Produk",error:n.nama}),a.jsx(w,{label:"Deskripsi",name:"deskripsi",value:e.deskripsi,onChange:i,placeholder:"Masukkan Deskripsi",error:n.deskripsi}),a.jsx(d,{label:"Kategori",name:"kategori",value:e.kategori,onChange:i,placeholder:"Masukkan Kategori",error:n.kategori}),a.jsx(d,{label:"Harga",name:"harga",value:e.harga,onChange:i,placeholder:"Masukkan Harga",error:n.harga}),a.jsx(d,{label:"Link Produk",name:"linkproduk",value:e.linkproduk,onChange:i,placeholder:"Masukkan Link Produk",error:n.linkproduk}),a.jsxs("div",{children:[a.jsx(N,{label:"Gambar Baru (Opsional)",name:"gambar",onChange:o=>b(o,"gambar"),error:n.gambar}),s.gambar&&a.jsxs("div",{className:"mt-3 p-2 border rounded-lg bg-gray-50 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Gambar Lama:"}),a.jsx("img",{src:`/storage/${s.gambar}`,alt:"Gambar lama",className:"w-32 h-32 object-cover rounded shadow"})]})]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{type:"submit",disabled:m,className:`px-8 py-3 rounded-lg font-semibold transition-all shadow-md ${m?"bg-lime-600 cursor-not-allowed":"bg-lime-800 hover:bg-lime-600 text-white"}`,children:m?"Menyimpan...":"Simpan Perubahan"}),a.jsx("button",{type:"button",onClick:()=>j.visit(c("produk.admin")),className:"px-8 py-3 rounded-lg font-semibold transition-all bg-gray-300 hover:bg-gray-400 shadow-md text-gray-700",children:"Batal"})]})]})})]})})}export{D as default};
